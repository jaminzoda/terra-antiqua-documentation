---
layout: tool
title: Compile Topo/Bathymetry
---
<html>
<head>
    <link rel="stylesheet" type="text/css" href="{{site.baseurl}}/assets/CSS/StyleSheet.css">
</head>
<title> Compile Topography / Bathymetry </title>

<body>
    <!-- icon: {{site.baseurl}}/assets/images/icon_compile_tb.png
working: false -->
    
  <div class="icon-container">
            <img width="10%" src="{{site.baseurl}}/assets/images/icon_compile_tb.png"
            alt="compile_tb"></div>
  <br> <br>
  <p align="center"> <iframe width="300" height="150" src="https://www.youtube.com/embed/GzuWo2WVsMY" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></p>
<p>
The purpose of this tool is to create a raster that combines the topography and the bathymetry at a given age of reconstruction.
<br>To do this you will simply select the  input raster files with the <i>Bedrock topography</i>, the <i>Bathymetry</i> and in some cases the <i>Ice topography</i> (<b>step 1 below</b>).
<br><i>Bedrock topography</i> was previously obtained by <a href="Preliminary_steps.html#present-day-topography">cutting modern topography and rotating this according to the tectonic rotation file to the targeted age</a>.

</p>
<!--
<div class="technical-details">
-->
    <p>If there are gaps in the overlying layers, some of the underlying layers may appear in those gaps and generate artefacts. For example, the Andes have many tectonic blocks that are separated by gaps in the past paleoreconstructions. In those gaps some of the underlying bathymetry may appear near the continent-ocean boundary.
    <br>This will result in unrealistic deep ocean bathymetry in the gaps between the otherwise mountainous tectonic blocks of the Andes. To remove these artefacts we have developed several tools (see <a href="remove_arts.html">Remove Artefacts<div2 class="icon-container">
        <img class="tool-icon" src="{{site.baseurl}}/assets/images/icon_remove_arts.png"
        alt="icon_remove_artefacts"></div2></a>). However, a simple and efficient solution is to first use the continental blocks from GPlates to help the tool differentiate between the topography and the bathymetry (<b>steps 3 and 4 below</b>).
    <br>The algorithm distinguishes between the different types of data being collected with the help of continental blocks as vector masks. When this mask layer is supplied, the user will assign it to the corresponding raster file (<b>step 4 below</b>).
</p>
<!-- </div> -->
<div class="note">
   <p> Note that this compilation will be done to the entire file. If you want to use it only in a limited area, you can export to a new file a rectangular section of the map with QGIS (in the layer window right click on the raster file name and choose <i>“export > save as...”</i> to select the rectangular area). Then run the tool on this new file. However, if you have global topo/bathymetry data, it is easier to first run this tool globally and then cut a rectangular section as described above.</p>
    </div>

<p><hr></p>
<h2>Step by step</h2>
    <a href="https://youtu.be/GzuWo2WVsMY">Link to the VIDEO illustrating these steps</a>
    <ol>
        <li> <p> Click on the icon <div2 class="icon-container">
            <img class="tool-icon" src="{{site.baseurl}}/assets/images/icon_compile_tb.png"
            alt="compile_tb"></div2>. The parameters window will pop up.</p>
            <div2 class= "icon-container">
                <img src="{{site.baseurl}}/assets/images/GUI_compile_tb.png"
                alt="GUI_compile_tb"></div2>
        </li>
            
        <li><p> Select the raster files you want to compile. These should correspond to the topography and the bathymetry (and as the case may be, the ice topography).</p></li>
        <div class="note"> <p>The layers will be combined in order (the layers on top of the list will remove overlapping data of underlying layers). Use the buttons at the bottom of the list to add, remove, and arrange rows:
            <div1 class="icon-container">
                <img class= "tool-icon" src="{{site.baseurl}}/assets/images/addButton.png"
               alt="add_Button">
                <img class= "tool-icon" src="{{site.baseurl}}/assets/images/removeButton.png"
                   alt="remove_Button">
                <img class= "tool-icon" src="{{site.baseurl}}/assets/images/arrow_up.png"
                       alt="arow up">
                <img class= "tool-icon" src="{{site.baseurl}}/assets/images/arrow_down.png"
                           alt="arrow down">
            </div1>.Be aware that you need to add a new line for each raster file with the button <div1 class="icon-container"> <img class= "tool-icon" src="{{site.baseurl}}/assets/images/addButton.png"
                               alt="add_Button"></div1>, whether you use the drop-down list or the browse button <div1 class="icon-container"> <img class= "tool-icon" src="{{site.baseurl}}/assets/images/browsebutton.png"
                                   alt="browse_Button"></div1> .</p>
        </div>
        
        <li><p><section id="remove_overlap">If there are gaps in the topography creating artefacts due to the underlying bathymetry, you may choose to <b><i>Remove overlapping bathymetry</b></i> in the <b><i>Advanced parameters</b></i>.</section>
            The polygons entered as a <i><b>Mask Layer</b></i> are used as a guide for this part of the process.
            
            
            In addition, a buffer (whose size can be edited under <b><i>Buffer distance</i></b>)  of “no data” values  will be created along the edges of those polygons.</p>
            <div2 class= "icon-container">
                <img src="{{site.baseurl}}/assets/images/buffer_compile_tb.png"
                alt="Buffer"></div2></li>
        <p></br></p>
        <div class="tip">
            <div1 class= "icon-container">
                <img class="warning-tip-icon" src="{{site.baseurl}}/assets/images/icon_tip.png"
                alt="warning">
                <p>It is recommended to use the polygons corresponding to continental blocks as mask layers for steps 3 and 4.</p>
                </div1></div>
        <p></br></p>
        <li><p>When you enter the <b><i>Mask Layer</i></b>, select which layer the polygons correspond to in the column <i>Apply mask</i>.</p>
        
        <li>
            Choose the <b><i>Output file path</b></i>, and click Run.
        </li>
        
    </ol>

</body>
</html>
<!-- Copyright (C) 2021 by Jovid Aminov, Diego Ruiz, Guillaume Dupont-Nivet
 Terra Antiqua is a plugin for the software QGis that deals with the reconstruction of paleogeography.
Full copyright notice in file: terra_antiqua.py -->
