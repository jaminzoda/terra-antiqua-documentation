<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Modify Topo-/ Bathymetry | Terra Antiqua Documentation</title>
<meta name="generator" content="Jekyll v4.2.0" />
<meta property="og:title" content="Modify Topo-/ Bathymetry" />
<meta name="author" content="Diego Ruiz, Jovid Aminov, Guillaume Dupont-Nivet" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="This is the web version of the manual and the documentation for Terra Antiqua (v1.0) - a QGIS plugin for paleogeographic reconstructions." />
<meta property="og:description" content="This is the web version of the manual and the documentation for Terra Antiqua (v1.0) - a QGIS plugin for paleogeographic reconstructions." />
<link rel="canonical" href="https://jaminzoda.github.io/terra-antiqua-documentation//modify_tb.html" />
<meta property="og:url" content="https://jaminzoda.github.io/terra-antiqua-documentation//modify_tb.html" />
<meta property="og:site_name" content="Terra Antiqua Documentation" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Modify Topo-/ Bathymetry" />
<script type="application/ld+json">
{"author":{"@type":"Person","name":"Diego Ruiz, Jovid Aminov, Guillaume Dupont-Nivet"},"url":"https://jaminzoda.github.io/terra-antiqua-documentation//modify_tb.html","headline":"Modify Topo-/ Bathymetry","description":"This is the web version of the manual and the documentation for Terra Antiqua (v1.0) - a QGIS plugin for paleogeographic reconstructions.","@type":"WebPage","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="https://jaminzoda.github.io/terra-antiqua-documentation//feed.xml" title="Terra Antiqua Documentation" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Terra Antiqua Documentation <img style="width: 6%" src="/assets/images/icon_main.png"
        alt="Terra Antiqua"></a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/Intro.html">About Terra Antiqua</a><a class="page-link" href="/Preliminary_steps.html">Preparing the input data with GPlates</a><a class="page-link" href="/primary_tools.html">Primary tools<img style="width:10%" src= "/assets/images/primary_tools.png" alt="Icons inside"></a><a class="page-link" href="/secondary_tools.html">Secondary tools<img style="width:10%" src= "/assets/images/secondary_tools.png" alt="Icons inside"></a><a class="page-link" href="/color_palettes.html">Color Palettes</a><a class="page-link" href="/sample_data.html">Sample Data Bundle</a><a class="page-link" href="/how_to.html">How to...</a><a class="page-link" href="/troubleshooting.html">Troubleshooting</a><a class="page-link" href="/Developpers.html">Info for Developpers</a><a class="page-link" href="/Licences.html">Licenses</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

    
  <header class="post-header"><div class="icon-for-title">
        <img class="tool-icon-for-title" src= "/assets/images/icon_modify_tb.png" alt="Icon of the tool"><h1 class="post-title">Modify Topo-/ Bathymetry</h1>
     </div></header>
  
    <html>
<head>
<link rel="stylesheet" type="text/css" href="assets/CSS/StyleSheet.css">
</head>
<title> Modify Topography </title>
<body>

    <p>
    This tool allows modifying the elevation values of a topography/bathymetry raster in a given area. For example, to reduce the elevation of a mountain range that used to be lower in the past. To infer this information a literature review can be performed and various datasets can be used (paleoelevation, thermochronology, fossil, etc...) some of which are available in the <a href="sample_data.html">Terra Antiqua data bundle</a> or on <a href="https://map.paleoenvironment.eu/">map.paleoenvironment.eu</a>.

    
   <p>
    A vector mask contained in a shapefile must define this area. This mask can be easily created using standard tools in QGIS (see <a href="how_to.html"><i>How to</i> table</a> and <a href="https://docs.qgis.org/3.10/en/docs/user_manual/index.html">QGIS manual</a> chapters 13, 14 and 15). If that file contains several polygons, they will be treated at once, unless you specify otherwise. The topography modification is either performed by linearly rescaling the existing elevation between a given maximum and minimum, or applying a mathematical formula of your own. These parameters are to be defined in the parameters window.

    
    <div class="technical-details">

    <p>In effect, the tool first rasterizes the vector masks using functions from the GDAL library. The resulting raster contains 1s inside polygons and 0s outside them. These raster masks are then used to select pixel values that need to be modified. Each pixelâ€™s elevation value is then changed with methods mentioned above. </br>
        The formula, elevation ranges to be modified, and other parameters can be entered directly in the dialog (step 4). They may also be retrieved from the attribute table of the input vector shapefile (when preparing shapefiles, it is possible to include this data in the attribute tables, to learn more on attribute tables and shapefiles see <a href="https://docs.qgis.org/3.10/en/docs/user_manual/index.html">QGIS manual</a> chapters 13, 14 and 15). The modified raster is then saved as a new raster and added to the current QGIS project as a new layer.</div>
        <p>It is advised to use this tool on the paleoDEM after setting the paleoshorelines if the regions to be modified are near or overlap coastal areas that may be affected.</p>
    <p><hr></p>
    <h2>Step-by-step</h2>

        <ol>
            <li> <p> Click on the icon <div2 class="icon-container">
                <img class="tool-icon" src="/assets/images/icon_modify_tb.png"
                alt="modify_tb"></div2>. The parameters window will pop up.</p>
                <div2 class= "icon-container">
                    <img src="/assets/images/GUI_Modify_tb.png"
                    alt="modify_tb"></div2></li>
                
               <li><p> Select the DEM you want to modify.</p></li>
               
               <li><p> Select the shapefile containing the polygons to be used as masks. If you do not want to use all the polygons, check the box to use only the selected features. For this you need to select polygons on the map canvas of QGIS. Choose the linear rescaling provided with the tool or if you want to use a formula of your own.</p></li>
               
               <ul><li> <b><i>Rescale with final minimum and maximum values</i></b>: this is the standard method. You can enter the final minimum and maximum elevation values, between which the topography values will be rescaled. Alternatively, you can choose to retrieve them from the attribute table of the shapefile if they have been previously entered. This can save time if the final maximum and final minimum are different for each polygon.</li>
               
               <li><b><i> Modify with formula</i></b>: you can either type a formula in the text box, or choose to retrieve it from the attribute table of the shapefile (if it is different for each polygon/mask). Additionally you may choose to constrain the elevation values the formula is going to be applied to. (see screenshot below)<br>
                   <div2 class= "icon-container">
                   <img src="/assets/images/GUI_Modify_tb_scr.jpg"
                   alt="modify_tb"></div2>
                   
                   <div class="note"><p>
                   To retrieve data (minimum elevation, maximum elevation, and/or formula) from the attribute table of the shapefile use this button <div2 class= "icon-container" >
                       <img style="width:4%" src="/assets/images/property_override_button.png"
                       alt="icon_parameter_from_attribute_table"></div2> then select <i>field type</i> and finally choose the corresponding attribute field from the list.</div>
                   <div class="note">
                       <p>Retrieving the data (minimum elevation, maximum elevation, and/or formula) from the attribute table of the shapefile saves time especially if the values are different for each polygon. To enter data in the shapefile see <a href="https://docs.qgis.org/3.10/en/docs/user_manual/index.html">QGIS manual</a> chapters 13, 14 and 15.</p></div>
                   <div class="warning">
                       <div1 class= "icon-container">
                           <img class="warning-tip-icon" src="/assets/images/icon_warning.png"
                           alt="warning">
                           
                       <p>
                The formula must have a specific format. Make sure you follow the instructions from the text on the right part of the window. The algorithm recognizes all mathematical operators. For the full list see the <a href="https://numpy.org/doc/stable/reference/routines.math.html">numpy website</a>.
                           </p></div>



                    <div class="tip">
                       <div1 class= "icon-container">
                           <img class="warning-tip-icon" src="/assets/images/icon_tip.png"
                           alt="recommendation">
                       <p>

                If you intend to use <b>different modification methods</b> for each mask in your shapefile, you will need to <b>use this tool several times</b>, each with one modification method.  The first output will then serve as input for the second, etc.
              <p>  In this case, you will have to select the option to <b>use only the selected features (polygons)</b>. For each run you need to select the masks you want to use from the shapefile and tick this box<div2 class= "icon-container">
                  <img src="/assets/images/GUI_Modify_tb_scr2.jpg"
                  alt="modify_tb"></div2>.
               <p> For instance:
                <p>3 types of modification:
                <ul><li><p>1 in masks for large areas (continental scale) to be linearly rescaled,</p></li>
                <li><p>1 in masks for smaller regions to be modified with a formula,</p></li>
                <li><p>and 1 in masks for smaller regions to be linearly rescaled.</p></li></ul>
                <hr>
                <p1 style="font-size:150%">Run the tool 3 times:</p1>
               
                <dl>
                <dt><b>1st run</b></dt>
                    <dd><p class="hangingindent"><u>Input</u>:
                        DEM to be modified + shapefile with masks of the areas to modify having selected only those corresponding to large areas.</p></dd>
                        <dd><p class="hangingindent"><u>Output</u>:
                            DEM with modifications to the large areas</p></dd>
                <dt><b>2nd run</b></dt>
                <dd><p class="hangingindent"><u>Input</u>:
                    DEM with modifications to the large areas + shapefile with masks of the areas to modify having selected only those corresponding to smaller regions to be modified with a formula.</p>
                </dd>
                    <dd><p class="hangingindent"><u>Output</u>:
                        DEM with modifications to large areas and smaller areas modified with formula.</p></dd>
               <dt> <b>3rd run</b> </dt>
                    <dd><p class="hangingindent"><u>Input</u>:
                        DEM with modifications to large areas and smaller areas modified with formula + shapefile with masks of the areas to modify having selected only those corresponding to smaller regions to be linearly rescaled.</p></dd>
                        <dd><p class="hangingindent"><u>Output</u>: Final DEM with all modifications.</p></dd></dl></div></li></ul>
               
                <li>
                Choose the <b><i>Output file path</b></i>, and click Run.</li>
            
            
            
            
        </ol>
    
    
    
    
    
    </p>

    </body>

    </html>



<!-- Copyright (C) 2021 by Jovid Aminov, Diego Ruiz, Guillaume Dupont-Nivet
 Terra Antiqua is a plugin for the software QGis that deals with the reconstruction of paleogeography.
Full copyright notice in file: terra_antiqua.py -->

    

</article>

<p></br></p>


  <div id="disqus_thread"></div>
  <script>
    var disqus_config = function () {
      this.page.url = 'https://jaminzoda.github.io/terra-antiqua-documentation//modify_tb.html';
      this.page.identifier = 'https://jaminzoda.github.io/terra-antiqua-documentation//modify_tb.html';
    };

    (function() {
      var d = document, s = d.createElement('script');

      s.src = 'https://terraantiqua.disqus.com/embed.js';

      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>


<p></br></p>

<div class="links-pages">
    <h2>Index:</h2>
</div>

<div class="links-pages" style="text-align:center;">

    <h2><b><a href="Intro.html">Introduction</a></b></h2>
    <h3><b><a href="Preliminary_steps.html">Preliminary Steps</a></b></h3>
</div>
<div class="links-pages">
    <table class="links-pages">
    <tr>
        <th><p><a href="primary_tools.html">Primary tools</a></p></th>
        <th><p><a href="secondary_tools.html">Secondary tools</a></p></th>
    </tr>
  <tr>
    <td><a href="compile_tb.html">Compile  Topo- /Bathymetry<img src="/assets/images/icon_compile_tb.png" alt="icon_compile_tb" width="9%"/></a></td>
    <td><a href="remove_arts.html">Remove Artefacts<img src="/assets/images/icon_remove_arts.png" alt="icon_remove artefacts" width="10%"/></a></td>
  </tr>
  <tr>
      <td><a href="set_pls.html">Set Paleoshorelines<img src="/assets/images/icon_set_pls.png" alt="icon_set_paleoshorelines" width="10%"/></a></td>
      <td><a href="prepare_masks.html">Prepare Masks<img src="/assets/images/icon_prepare_masks.png" alt="icon_prepare_masks" width="10%"/></a></td>
  </tr>
  <tr>
      <td><a href="modify_tb.html">Modify Topo- /Bathymetry<img src="/assets/images/icon_modify_tb.png" alt="icon_modify_tb" width="10%"/></a></td>
      <td><a href="fill_gaps.html">Fill Gaps<img src="/assets/images/icon_std_proc.png" alt="icon_standard_processing" width="10%"/></a></td>
  </tr>
  <tr>
      <td><a href="create_tb.html">Create Topo- /Bathymetry<img src="/assets/images/icon_create_tb.png" alt="icon_create_tb" width="10%"/></a></td>
      <td><a href="isostat_cp.html">Isostatic Compensation<img src="/assets/images/icon_std_proc.png" alt="icon_standard_processing" width="10%"/></a></td>
  </tr>
  <tr>
      <td> - - - - - - - - - -</td>
      <td><a href="smoothing.html">Smooth Raster<img src="/assets/images/icon_std_proc.png" alt="icon_standard_processing" width="10%"/></a></td>
  </tr>
  <tr>
      <td><a href="sample_data.html"><b>Sample Data Bundle</b> </a></td>
      <td><a href="set_sl.html">Set New Sea Level<img src="/assets/images/icon_std_proc.png" alt="icon_standard_processing" width="10%"/></a></td>
  </tr>
  <tr>
      <td><a href="how_to.html"><b>How-to...</b> </a></td>
      <td><a href="calc_bathy.html">Calculate Bathymetry<img src="/assets/images/icon_std_proc.png" alt="icon_standard_processing" width="10%"/></a></td>
    </tr>
  <tr>
      <td><a href="troubleshooting.html"> <b>Troubleshooting</b></a></td>
      <td><a href="copy_paste.html">Copy / Paste Raster<img src="/assets/images/icon_std_proc.png" alt="icon_standard_processing" width="10%"/></a></td>
    </tr>
  <tr>
      <td><a href="Developpers.html"> <b>Info for Developpers</b></a></td>
      <td><a href="change_symbology.html">Change Map Symbology<img src="/assets/images/icon_std_proc.png" alt="icon_standard_processing" width="10%"/></a></td>
   
  </table>
<!--
    <ul><p><h3>Primary tools:</h3></p>
        <h4> <li><a href="compile_tb.html">Compile Topo- / Bathymetry</a></li></h4>
        <h4> <li><a href="set_pls.html">Set Paleoshorelines</a></li></h4>
        <h4> <li><a href="modify_tb.html">Modify Topo- / Bathymetry</a></li></h4>
        <h4> <li><a href="create_tb.html">Create Topo- / Bathymetry</a></li></h4>
    </ul>
   
    <ul> <p><h3>Secondary tools:</h3></p>
            <h4> <li><a href="remove_arts.html">Remove Artefacts</a></li></h4>
            <h4> <li><a href="prepare_masks.html">Prepare Masks</a></li></h4>
            <h4> <li><a href="fill_gaps.html">Fill Gaps</a></li></h4>
            <h4> <li><a href="copy_paste.html">Copy/Paste Raster</a></li></h4>
            <h4> <li><a href="isostat_cp.html">Isostatic Compensation</a></li></h4>
            <h4> <li><a href="smoothing.html">Smooth Raster</a></li></h4>
            <h4> <li><a href="set_sl.html">Set New Sea Level</a></li></h4>
            <h4> <li><a href="calc_bathy.html">Calculate Bathymetry</a></li></h4>
        </ul>
-->
    </div>






      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Terra Antiqua Documentation</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Diego Ruiz, Jovid Aminov, Guillaume Dupont-Nivet</li><li><a class="u-email" href="mailto:terraantiqua.qgis@gmail.com">terraantiqua.qgis@gmail.com</a></li><li>        <a href="https://docs.google.com/forms/d/e/1FAIpQLSc7r0Uhl2aauYCyBNpMgFrtRfP8oIJtjL_e5S1t7NHKmP15sA/viewform?usp=sf_link"> Feedback & Bug reports</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/jaminzoda"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">jaminzoda</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>This is the web version of the manual and the documentation for Terra Antiqua (v1.0) - a QGIS plugin for paleogeographic reconstructions.</p>
       
      </div>
    </div>

  </div>

</footer>
</body>

</html>
